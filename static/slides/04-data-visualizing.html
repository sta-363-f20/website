<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Data and visualization   ðŸ“‰</title>
    <meta charset="utf-8" />
    <meta name="author" content="Dr.Â Lucy Dâ€™Agostino McGowan" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/font-awesome/css/all.css" rel="stylesheet" />
    <link href="libs/font-awesome/css/v4-shims.css" rel="stylesheet" />
    <link href="libs/countdown/countdown.css" rel="stylesheet" />
    <script src="libs/countdown/countdown.js"></script>
    <link rel="stylesheet" href="slides.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Data and visualization <br> ðŸ“‰
### Dr.Â Lucy Dâ€™Agostino McGowan

---






layout: true


&lt;div class="my-footer"&gt;
&lt;span&gt;
&lt;img src = "img/dsbox-logo.png" width = "30"&gt; &lt;/img&gt; Slides adapted from &lt;a href="https://datasciencebox.org" target="_blank"&gt;datasciencebox.org&lt;/a&gt; by Dr. Lucy D'Agostino McGowan
&lt;/span&gt;
&lt;/div&gt; 
---



class: center, middle

# Exploratory data analysis

---

## What is EDA?

- Exploratory data analysis (EDA) is an approach to analyzing data sets to summarize its main characteristics.
- Often, this is visual. That's what we're focusing on today.
- But we might also calculate summary statistics and perform data wrangling/manipulation/transformation at (or before) this stage of the 
analysis. That's what we'll focus on next.

---

class: center, middle

# Data visualization

---

## Data visualization

&gt; *"The simple graph has brought more information to the data analystâ€™s mind than any other device." â€” John Tukey*

- Data visualization is the creation and study of the visual representation of data.
- There are many tools for visualizing data (R is one of them), and many approaches/systems within R for making data visualizations (**ggplot2** is one of them, and that's what we're going to use).

---

## ggplot2 `\(\in\)` tidyverse

.pull-left[
![](img/02/ggplot2-part-of-tidyverse.png)
]
.pull-right[
- **ggplot2** is tidyverse's data visualization package
- The `gg` in "ggplot2" stands for Grammar of Graphics
- It is inspired by the book **Grammar of Graphics** by Leland Wilkinson &lt;sup&gt;â€ &lt;/sup&gt;
- A grammar of graphics is a tool that enables us to concisely describe the components of a graphic
![](img/02/grammar-of-graphics.png)
]

.footnote[ 
&lt;sup&gt;â€ &lt;/sup&gt; Source: [BloggoType](http://bloggotype.blogspot.com/2016/08/holiday-notes2-grammar-of-graphics.html)
]

---

.question[
Which function creates the plot? 
]

.small[

```r
ggplot(data = starwars, mapping = aes(x = height, y = mass)) +
  geom_point() +
  labs(title = "Mass vs. height of Starwars characters",
       x = "Height (cm)", y = "Weight (kg)")
```

```
## Warning: Removed 28 rows containing missing values (geom_point).
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-2-1.png)&lt;!-- --&gt;
]

---

.question[
What is the dataset being plotted? 
]

.small[

```r
ggplot(data = starwars, mapping = aes(x = height, y = mass)) +
  geom_point() +
  labs(title = "Mass vs. height of Starwars characters",
       x = "Height (cm)", y = "Weight (kg)")
```

```
## Warning: Removed 28 rows containing missing values (geom_point).
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-3-1.png)&lt;!-- --&gt;
]

---
.question[
Which variables are on the x-axis and y-axis? 
]

.small[

```r
ggplot(data = starwars, mapping = aes(x = height, y = mass)) +
  geom_point() +
  labs(title = "Mass vs. height of Starwars characters",
       x = "Height (cm)", y = "Weight (kg)")
```

```
## Warning: Removed 28 rows containing missing values (geom_point).
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-4-1.png)&lt;!-- --&gt;
]

---

.question[
What about that warning?
]

.small[

```r
ggplot(data = starwars, mapping = aes(x = height, y = mass)) +
  geom_point() +
  labs(title = "Mass vs. height of Starwars characters",
       x = "Height (cm)", y = "Weight (kg)")
```

```
## Warning: Removed 28 rows containing missing values (geom_point).
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-5-1.png)&lt;!-- --&gt;
]

---

.question[
What does `geom_smooth()` do? What else changed between the previous plot and this one?
]

.small[

```r
ggplot(data = starwars, mapping = aes(x = height, y = mass)) +
  geom_point() +
* geom_smooth() +
  labs(title = "Mass vs. height of Starwars characters",
       x = "Height (cm)", y = "Weight (kg)")
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-6-1.png)&lt;!-- --&gt;
]

---


![](img/02/ggplot2_masterpiece.png)

.my-footer[
&lt;font size="2"&gt;
Artwork by @allison_horst
&lt;/font&gt;
]

---

## ggplot2 components

- **data**
- **aes**thetic mapping
- layer(s)

---

## ggplot2 premise

![](img/02/ggplot-premise.png)

---

## Hello ggplot2!

![](img/02/layer-1.png)

---

## Hello ggplot2!

![](img/02/layer-2.png)

---

## Hello ggplot2!

![](img/02/layer-3.png)

---

## Hello ggplot2!

![](img/02/layer-4.png)

---

## Hello ggplot2!

![](img/02/layer-5.png)

---

## Hello ggplot2!


- `ggplot()` is the main function in ggplot2 and plots are constructed in layers  
- The structure of the code for plots can often be summarized as


```r
ggplot + 
  geom_xxx
```

---

## Hello ggplot2!


- `ggplot()` is the main function in ggplot2 and plots are constructed in layers  
- The structure of the code for plots can often be summarized as


```r
ggplot + 
  geom_xxx
```

or, more precisely


```r
ggplot(data = [dataset], mapping = aes(x = [x-variable], y = [y-variable])) +
  geom_xxx() +
  other options
```


---

## Hello ggplot2!

- To use ggplot2 functions, first load tidyverse


```r
library(tidyverse)
```

--

- For help with the ggplot2, see [ggplot2.tidyverse.org](http://ggplot2.tidyverse.org/)

---

class: center, middle

# Visualizing Star Wars

---

class: left

## Dataset terminology

.question[
What does each row represent? What does each column represent?
]


```r
starwars
```

.small[


```
## # A tibble: 5 x 14
##   name  height  mass hair_color skin_color eye_color birth_year sex   gender
##   &lt;chr&gt;  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
## 1 Lukeâ€¦    172    77 blond      fair       blue            19   male  mascuâ€¦
## 2 C-3PO    167    75 &lt;NA&gt;       gold       yellow         112   none  mascuâ€¦
## 3 R2-D2     96    32 &lt;NA&gt;       white, blâ€¦ red             33   none  mascuâ€¦
## 4 Dartâ€¦    202   136 none       white      yellow          41.9 male  mascuâ€¦
## 5 Leiaâ€¦    150    49 brown      light      brown           19   femaâ€¦ feminâ€¦
## # â€¦ with 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
## #   vehicles &lt;list&gt;, starships &lt;list&gt;
```

]

--

- Each row is an **observation**
- Each column is a **variable**

---

## Luke Skywalker

![luke-skywalker](img/02/luke-skywalker.png)

---

## What's in the Star Wars data?

Take a `glimpse` at the data:


```r
glimpse(starwars)
```

```
## Rows: 87
## Columns: 14
## $ name       &lt;chr&gt; "Luke Skywalker", "C-3PO", "R2-D2", "Darth Vader", "Leia Oâ€¦
## $ height     &lt;int&gt; 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180, â€¦
## $ mass       &lt;dbl&gt; 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, 77â€¦
## $ hair_color &lt;chr&gt; "blond", NA, NA, "none", "brown", "brown, grey", "brown", â€¦
## $ skin_color &lt;chr&gt; "fair", "gold", "white, blue", "white", "light", "light", â€¦
## $ eye_color  &lt;chr&gt; "blue", "yellow", "red", "yellow", "brown", "blue", "blue"â€¦
## $ birth_year &lt;dbl&gt; 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, NA, 24.0, 57.0,â€¦
## $ sex        &lt;chr&gt; "male", "none", "none", "male", "female", "male", "female"â€¦
## $ gender     &lt;chr&gt; "masculine", "masculine", "masculine", "masculine", "feminâ€¦
## $ homeworld  &lt;chr&gt; "Tatooine", "Tatooine", "Naboo", "Tatooine", "Alderaan", "â€¦
## $ species    &lt;chr&gt; "Human", "Droid", "Droid", "Human", "Human", "Human", "Humâ€¦
## $ films      &lt;list&gt; [&lt;"The Empire Strikes Back", "Revenge of the Sith", "Retuâ€¦
## $ vehicles   &lt;list&gt; [&lt;"Snowspeeder", "Imperial Speeder Bike"&gt;, &lt;&gt;, &lt;&gt;, &lt;&gt;, "Iâ€¦
## $ starships  &lt;list&gt; [&lt;"X-wing", "Imperial shuttle"&gt;, &lt;&gt;, &lt;&gt;, "TIE Advanced x1â€¦
```

---
class: left

## What's in the Star Wars data?

.question[
How many rows and columns does this dataset have? What does each row represent? What does each column represent?
]

Run the following **in the Console** to view the help

```r
?starwars
```

&lt;img src="img/02/starwars-help.png" width="435" /&gt;

---
class: left

## Mass vs. height

.small[

```r
ggplot(data = starwars, mapping = aes(x = height, y = mass)) +
  geom_point()
```

```
## Warning: Removed 28 rows containing missing values (geom_point).
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-16-1.png)&lt;!-- --&gt;
]

---
class: left

## What's that warning?

- Not all characters have height and mass information (hence 28 of them not plotted)

.small[
```
## Warning: Removed 28 rows containing missing values (geom_point).
```
]

- Going forward I'll suppress the warning to save room on slides, but it's important to note it

---
class: left

## Mass vs. height

.question[
How would you describe this relationship? What other variables would help us understand data points that don't follow the overall trend? Who is the not so tall but really chubby character?
]

.small[

```r
ggplot(data = starwars, mapping = aes(x = height, y = mass)) +
  geom_point() +
* labs(title = "Mass vs. height of Starwars characters",
*      x = "Height (cm)", y = "Weight (kg)")
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-17-1.png)&lt;!-- --&gt;
]

---

## Jabba!

&lt;img src="img/02/jabbaplot.png" width="768" /&gt;

---
class: left

## Additional variables

We can map additional variables to various features of the plot:

- aesthetics
  - color
  - size
  - shape
  - alpha (transparency)
- faceting: small multiples displaying different subsets

---

class: center, middle

# Aesthetics

---
class: left

## Aesthetics options

Visual characteristics of plotting characters that can be **mapped to a specific variable**
in the data are

- `color`
- `size`
- `shape`
- `alpha` (transparency)

---
class: left

## Mass vs. height + gender

.small[

```r
ggplot(data = starwars, mapping = aes(x = height, y = mass, color = gender)) +
  geom_point()
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-19-1.png)&lt;!-- --&gt;
]
---
class: left

## Mass vs. height + gender

Let's map the size to birth_year:

.small[

```r
ggplot(data = starwars,
       mapping = aes(x = height, y = mass, color = gender, 
*                    size = birth_year
       )) +
  geom_point()
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-20-1.png)&lt;!-- --&gt;
]

---
class: left

## Mass vs. height + gender

Let's now increase the size of all points **not** based on the values of a 
variable in the data:

.small[

```r
ggplot(data = starwars, mapping = aes(x = height, y = mass, color = gender)) +
* geom_point(size = 2)
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-21-1.png)&lt;!-- --&gt;
]

---
class: left

## Aesthetics summary

- Continuous variable are measured on a continuous scale
- Discrete variables are measured (or often counted) on a discrete scale

aesthetics    | discrete                 | continuous
------------- | ------------------------ | ------------
color         | rainbow of colors        | gradient
size          | discrete steps           | linear mapping between radius and value
shape         | different shape for each | shouldn't (and doesn't) work

- Use aesthetics for mapping features of a plot to a variable, define the features in the geom for customization **not** mapped to a variable

---

class: center, middle

# Faceting

---
class: left

## Faceting options

- Smaller plots that display different subsets of the data
- Useful for exploring conditional relationships and large data

.small[

```r
ggplot(data = starwars, mapping = aes(x = height, y = mass)) +
* facet_grid(. ~ gender) +
  geom_point() +
  labs(title = "Mass vs. height of Starwars characters",
*      subtitle = "Faceted by gender",
       x = "Height (cm)", y = "Weight (kg)")
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-22-1.png)&lt;!-- --&gt;
]

---
class: left

## Dive further...

.question[
In the next few slides describe what each plot displays. Think about how the code relates to the output.
]

--

&lt;br&gt;&lt;br&gt;&lt;br&gt;

.alert[
The plots in the next few slides do not have proper titles, axis labels, etc. because we want you to figure out what's happening in the plots. But you should always label your plots!
]

---

.small[

```r
ggplot(data = starwars, mapping = aes(x = height, y = mass)) +
  geom_point() +
  facet_grid(gender ~ .)
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-23-1.png)&lt;!-- --&gt;
]

---

.small[

```r
ggplot(data = starwars, mapping = aes(x = height, y = mass)) +
  geom_point() +
  facet_grid(. ~ gender)
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-24-1.png)&lt;!-- --&gt;
]

---

.small[

```r
ggplot(data = starwars, mapping = aes(x = height, y = mass)) +
  geom_point() +
  facet_wrap(~ eye_color)
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-25-1.png)&lt;!-- --&gt;
]

---
class: left

## Facet summary

- `facet_grid()`: 
- 2d grid
- `rows ~ cols`
- use `.` for no split
- `facet_wrap()`: 1d ribbon wrapped into 2d

---

class: center, middle

## More ggplot2 info:

## ggplot2 in 2

### [https://leanpub.com/ggplot2in2/c/sta-212-f19](https://leanpub.com/ggplot2in2/c/sta-212-f19)

---

class: inverse

<div class="countdown" id="timer_5f511988" style="right:0;bottom:0;" data-warnwhen="0">
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

## &lt;i class="fas fa-laptop"&gt;&lt;/i&gt; `Star Wars`

- Go to Canvas and download the `Star Wars` application exercise file
- Create a new project and upload the .Rmd file from Canvas into RStudio
- Complete the `Star Wars` application exercise

---

class: center, middle

# Identifying variables

---

## Types of variables

- **Numerical variables** (quantitative variables) can be classified as **continuous** or **discrete** based on whether or not the variable can take on an infinite number of values or only non-negative whole numbers, respectively. 
- If the variable is **categorical**, we can determine if it is **ordinal** based on whether or not the levels have a natural ordering.

---

class: center, middle

# Visualizing numerical data

---
class: left

## Describing shapes of numerical distributions

* shape:
  * skewness: right-skewed, left-skewed, symmetric (skew is to the side of the longer tail)
  * modality: unimodal, bimodal, multimodal, uniform
* center: mean (`mean`), median (`median`), mode (not always useful)
* spread: range (`range`), standard deviation (`sd`), inter-quartile range (`IQR`)
* unusual observations

---
class: left

## Histograms

.small[

```r
ggplot(data = starwars, mapping = aes(x = height)) +
  geom_histogram(binwidth = 10)
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-26-1.png)&lt;!-- --&gt;
]

---
class: left

## Density plots

.small[

```r
ggplot(data = starwars, mapping = aes(x = height)) +
  geom_density()
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-27-1.png)&lt;!-- --&gt;
]

---
class: left

## Side-by-side box plots

.small[

```r
ggplot(data = starwars, mapping = aes(y = height, x = gender)) +
  geom_boxplot()
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-28-1.png)&lt;!-- --&gt;
]

---
class: left

## Side-by-side box plots

.small[

```r
ggplot(data = starwars, mapping = aes(y = height, x = gender)) +
  geom_boxplot(outlier.shape = NA) + 
  geom_jitter()
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-29-1.png)&lt;!-- --&gt;
]

---

class: center, middle

## Show your data!

---

class: center, middle

# Visualizing categorical data

---
class: left

## Bar plots

.small[

```r
ggplot(data = starwars, mapping = aes(x = gender)) +
  geom_bar()
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-30-1.png)&lt;!-- --&gt;
]

---
class: left

## Segmented bar plots, counts

.small[

```r
ggplot(data = starwars,
       mapping = aes(x = gender, fill = hair_color)) +
  geom_bar()
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-31-1.png)&lt;!-- --&gt;
]

---
class: left

## Segmented bar plots, proportions

.small[

```r
ggplot(data = starwars, 
       mapping = aes(x = gender, fill = hair_color)) +
  geom_bar(position = "fill") +
  labs(y = "proportion")
```

![](04-data-visualizing_files/figure-html/unnamed-chunk-32-1.png)&lt;!-- --&gt;
]

---
class: left

## Which plot is more appropriate?

.question[
Which plot is a more useful representation for visualizing the relationship between gender and height?
]


![](04-data-visualizing_files/figure-html/unnamed-chunk-33-1.png)&lt;!-- --&gt;![](04-data-visualizing_files/figure-html/unnamed-chunk-33-2.png)&lt;!-- --&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightLines": true,
"highlightStyle": "github",
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
